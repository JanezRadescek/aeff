operation stop
operation go

let rec preempt () =
  with stop _ ->
    with go _ -> () as y do match y with () -> preempt ()
  as _
  do ()

do
  preempt (); 1 + 1 + 1 + 1 + 1
