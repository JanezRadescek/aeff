operation request
operation response

let rec server () =
  promise
    request x ->
      response (x + 1);
      server ()
  as _ in
  ()

do
  server()
