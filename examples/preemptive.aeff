operation stop
operation go

let rec preempt () =
  promise (stop _ |->
    promise (go _ |->
      ()
    )as p in
    await p until <<y>> in
    preempt ()
  )as _ in
  ()

run
  preempt (); 1 + 1 + 1 + 1 + 1
