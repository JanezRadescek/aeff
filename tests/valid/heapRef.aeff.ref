main
type option-8
type callId-9
type loc-10
type val-11
operation lookupReq-0 : loc-10 × callId-9
operation updateReq-1 : loc-10 × val-11 × callId-9
operation allocReq-2 : val-11 × callId-9
operation lookupRes-3 : val-11 × callId-9
operation updateRes-4 : callId-9
operation allocRes-5 : loc-10 × callId-9
↑allocReq-2 (0, 0), id=1
↑allocRes-5 (0, 0), id=0
↑allocReq-2 (10, 1), id=1
↑allocRes-5 (1, 1), id=0
↑updateReq-1 (0, 10, 2), id=1
↑updateRes-4 2, id=0
↑lookupReq-0 (0, 3), id=1
↑lookupRes-3 (10, 3), id=0
↑updateReq-1 (1, 14, 4), id=1
↑updateRes-4 4, id=0
↑lookupReq-0 (0, 5), id=1
↑lookupRes-3 (10, 5), id=0
↑lookupReq-0 (1, 6), id=1
↑lookupRes-3 (14, 6), id=0
The program has terminated in the configuration:
Conf
  id = 0;
  res = promise (lookupReq-0 (l-757, callId-756) ↦
                                let v-758 =
                                   let var-759 =
                                      let var-760 =
                                         (!)-13
                                         { contents = (1, 14)::(0, 10)::[] } in
                                      lookupHeap-211 var-760 in var-759 l-757 in
                                ↑lookupRes-3((v-758, callId-756), return ());
                                (rec awaitLookup-808 ...) ())
                       as p-755 in
                       promise (updateReq-1 (l-548, v-547, callId-546) ↦
                                let heap'-549 =
                                   let var-550 =
                                      let var-551 =
                                         let var-552 =
                                            (!)-13
                                            { contents = (1, 14)::(0, 10)::[] } in
                                         updateHeap-218 var-552 in
                                      var-551 l-548 in var-550 v-547 in
                                ↑updateRes-4(callId-546, return ());
                                (:=)-14
                                ({ contents = (1, 14)::(0, 10)::[] }, 
                                 heap'-549); (rec awaitUpdate-686 ...) ())
                       as p-545 in
                       promise (allocReq-2 (v-385, callId-384) ↦
                                let (heap'-387, l-386) =
                                   let var-388 =
                                      let var-389 =
                                         (!)-13
                                         { contents = (1, 14)::(0, 10)::[] } in
                                      allocHeap-228 var-389 in var-388 v-385 in
                                ↑allocRes-5((l-386, callId-384), return ());
                                (:=)-14
                                ({ contents = (1, 14)::(0, 10)::[] }, 
                                 heap'-387); (rec awaitAlloc-427 ...) ())
                       as p-383 in
                       return p-383
Conf
  id = 1;
  res = (10, 14)
