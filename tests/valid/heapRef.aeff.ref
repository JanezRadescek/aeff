main
type option-8
type callId-9
type loc-10
type val-11
operation lookupReq-0 : loc-10 × callId-9
operation updateReq-1 : loc-10 × val-11 × callId-9
operation allocReq-2 : val-11 × callId-9
operation lookupRes-3 : val-11 × callId-9
operation updateRes-4 : callId-9
operation allocRes-5 : loc-10 × callId-9
↑allocReq-2 (0, 0), id=1
↑allocRes-5 (0, 0), id=0
↑allocReq-2 (10, 1), id=1
↑allocRes-5 (1, 1), id=0
↑updateReq-1 (0, 10, 2), id=1
↑updateRes-4 2, id=0
↑lookupReq-0 (0, 3), id=1
↑lookupRes-3 (10, 3), id=0
↑updateReq-1 (1, 14, 4), id=1
↑updateRes-4 4, id=0
↑lookupReq-0 (0, 5), id=1
↑lookupRes-3 (10, 5), id=0
↑lookupReq-0 (1, 6), id=1
↑lookupRes-3 (14, 6), id=0
The program has terminated in the configuration:
Conf
  id = 0;
  res = promise (lookupReq-0 (l-236, callId-235) ↦
                                let v-239 =
                                   let var-237 =
                                      let var-238 =
                                         (!)-13
                                         { contents = (1, 14)::(0, 10)::[] } in
                                      lookupHeap-211 var-238 in var-237 l-236 in
                                ↑lookupRes-3((v-239, callId-235), return ());
                                (rec awaitLookup-234 ...) ())
                       as p-240 in
                       promise (updateReq-1 (l-244, v-243, callId-242) ↦
                                let heap'-248 =
                                   let var-245 =
                                      let var-246 =
                                         let var-247 =
                                            (!)-13
                                            { contents = (1, 14)::(0, 10)::[] } in
                                         updateHeap-218 var-247 in
                                      var-246 l-244 in var-245 v-243 in
                                ↑updateRes-4(callId-242, return ());
                                (:=)-14
                                ({ contents = (1, 14)::(0, 10)::[] }, 
                                 heap'-248); (rec awaitUpdate-241 ...) ())
                       as p-249 in
                       promise (allocReq-2 (v-252, callId-251) ↦
                                let (heap'-256, l-255) =
                                   let var-253 =
                                      let var-254 =
                                         (!)-13
                                         { contents = (1, 14)::(0, 10)::[] } in
                                      allocHeap-228 var-254 in var-253 v-252 in
                                ↑allocRes-5((l-255, callId-251), return ());
                                (:=)-14
                                ({ contents = (1, 14)::(0, 10)::[] }, 
                                 heap'-256); (rec awaitAlloc-250 ...) ())
                       as p-257 in
                       return p-257
Conf
  id = 1;
  res = (10, 14)
