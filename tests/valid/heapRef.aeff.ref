type option-8
type callId-9
type loc-10
type val-11
operation lookupReq-0 : int × int
operation updateReq-1 : int × int × int
operation allocReq-2 : int × int
operation lookupRes-3 : int × int
operation updateRes-4 : int
operation allocRes-5 : int × int
↑allocReq-2 (0, 0), id=1
↑allocRes-5 (0, 0), id=0
↑allocReq-2 (10, 1), id=1
↑allocRes-5 (1, 1), id=0
↑updateReq-1 (0, 10, 2), id=1
↑updateRes-4 2, id=0
↑lookupReq-0 (0, 3), id=1
↑lookupRes-3 (10, 3), id=0
↑updateReq-1 (1, 14, 4), id=1
↑updateRes-4 4, id=0
↑lookupReq-0 (0, 5), id=1
↑lookupRes-3 (10, 5), id=0
↑lookupReq-0 (1, 6), id=1
↑lookupRes-3 (14, 6), id=0
The program has terminated in the configuration:
Conf
  id = 0;
Await
res = promise (lookupReq-0 (l-719, callId-718) ↦
                     let v-720 =
                        let var-721 =
                           let var-722 =
                              (!)-13 { contents = (1, 14)::(0, 10)::[] } in
                           lookupHeap-211 var-722 in var-721 l-719 in
                     ↑lookupRes-3((v-720, callId-718), return ());
                     (rec awaitLookup-767 ...) ())
            as p-717 in
            promise (updateReq-1 (l-525, v-524, callId-523) ↦
                     let heap'-526 =
                        let var-527 =
                           let var-528 =
                              let var-529 =
                                 (!)-13 { contents = (1, 14)::(0, 10)::[] } in
                              updateHeap-218 var-529 in var-528 l-525 in
                        var-527 v-524 in
                     ↑updateRes-4(callId-523, return ());
                     (:=)-14 ({ contents = (1, 14)::(0, 10)::[] }, heap'-526);
                     (rec awaitUpdate-653 ...) ())
            as p-522 in
            promise (allocReq-2 (v-371, callId-370) ↦
                     let (heap'-373, l-372) =
                        let var-374 =
                           let var-375 =
                              (!)-13 { contents = (1, 14)::(0, 10)::[] } in
                           allocHeap-228 var-375 in var-374 v-371 in
                     ↑allocRes-5((l-372, callId-370), return ());
                     (:=)-14 ({ contents = (1, 14)::(0, 10)::[] }, heap'-373);
                     (rec awaitAlloc-409 ...) ())
            as p-369 in
            return p-369
Conf
  id = 1;
Done
res = (10, 14)
