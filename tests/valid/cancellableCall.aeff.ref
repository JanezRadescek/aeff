main
type option-8
operation call-0 : int-1 × int-1
operation result-1 : int-1 × int-1
operation cancel-2 : int-1
operation dummy-3 : empty-6
↑call-0 (3, 2), id=2
↑cancel-2 0, id=2
↑call-0 (2, 1), id=2
↑call-0 (1, 0), id=2
↑result-1 (120, 0), id=0
↑result-1 (240, 1), id=0
↑result-1 (360, 2), id=0
↑call-0 (2, 1), id=1
↑call-0 (240, 2), id=2
↑cancel-2 2, id=2
↑result-1 (240, 1), id=0
↑result-1 (28800, 2), id=0
The program has terminated in the configuration:
Conf
  id = 0;
  res = promise (dummy-3 empty-532 ↦
                                return-205 ⟨empty-532⟩)
                       as dummyPromise-500 in
                       promise (dummy-3 empty-813 ↦
                                return-205 ⟨empty-813⟩)
                       as dummyPromise-781 in
                       promise (cancel-2 callNo'-1101 ↦
                                let var-1102 = (=)-0 (2, callNo'-1101) in
                                match var-1102 with (true ↦ promise (
                                                              dummy-3 empty-1135 ↦
                                                              return-205
                                                              ⟨empty-1135⟩)
                                                              as dummyPromise-1103 in
                                                              (rec loop-1126 ...)
                                                              ();
                                                              awaitValue-207
                                                              dummyPromise-1103;
                                                              let var-1104 =
                                                                 (rec awaitCancel-1114 ...)
                                                                 2 in
                                                              var-1104
                                                              (rec loop-1105 ...) | 
                                                     false ↦ (rec var-1136 ...)
                                                               ()))
                       as var-1100 in
                       promise (cancel-2 callNo'-1227 ↦
                                let var-1228 = (=)-0 (1, callNo'-1227) in
                                match var-1228 with (true ↦ promise (
                                                              dummy-3 empty-1261 ↦
                                                              return-205
                                                              ⟨empty-1261⟩)
                                                              as dummyPromise-1229 in
                                                              (rec loop-1252 ...)
                                                              ();
                                                              awaitValue-207
                                                              dummyPromise-1229;
                                                              let var-1230 =
                                                                 (rec awaitCancel-1240 ...)
                                                                 1 in
                                                              var-1230
                                                              (rec loop-1231 ...) | 
                                                     false ↦ (rec var-1262 ...)
                                                               ()))
                       as var-1226 in
                       promise (call-0 (x-1176, callNo-1175) ↦
                                let var-1181 = awaitCancel-225 callNo-1175 in
                                var-1181 (rec loop-1299 ...);
                                let y-1177 =
                                   (fun x-1178 ↦ let var-1179 =
                                                      let var-1180 =
                                                         (*)-8 (6, x-1178) in
                                                      (*)-8 (5, var-1180) in
                                                   (*)-8 (4, var-1179))
                                   x-1176 in
                                ↑result-1((y-1177, callNo-1175), return ());
                                (rec loop-1299 ...) ())
                       as p-1174 in
                       let var-778 =
                          ↓call-0((2, 1),
                                    ↓call-0((240, 2),
                                              await dummyPromise-781 until
                                                    ⟨value-209⟩ in
                                              return-205 value-209));
                          ↓call-0((2, 1),
                                    ↓call-0((240, 2),
                                              let var-782 =
                                                 (rec awaitCancel-792 ...) 2 in
                                              var-782 (rec loop-783 ...))) in
                       ↓call-0((2, 1),
                                 ↓call-0((240, 2),
                                           ↓cancel-2(2,
                                                       promise (call-0 (
                                                                x-728, 
                                                                callNo-727) ↦
                                                                let var-733 =
                                                                   awaitCancel-225
                                                                   callNo-727 in
                                                                var-733
                                                                (rec loop-851 ...);
                                                                let y-729 =
                                                                   (fun x-730 ↦ 
                                                                   let
                                                                    var-731 =
                                                                   let
                                                                    var-732 =
                                                                   (*)-8
                                                                   (6, x-730) in
                                                                   (*)-8
                                                                   (5, 
                                                                    var-732) in
                                                                   (*)-8
                                                                   (4, 
                                                                    var-731))
                                                                   x-728 in
                                                                ↑result-1(
                                                                (y-729, 
                                                                 callNo-727),
                                                                return ());
                                                                (rec loop-851 ...)
                                                                ())
                                                       as p-726 in
                                                       let var-497 =
                                                          ↓call-0((
                                                                    3, 2),
                                                                    await 
                                                                    dummyPromise-500 until
                                                                    ⟨value-209⟩ in
                                                                    return-205
                                                                    value-209);
                                                          ↓call-0((
                                                                    3, 2),
                                                                    let
                                                                    
                                                                    var-501 =
                                                                    (rec awaitCancel-511 ...)
                                                                    0 in
                                                                    var-501
                                                                    (rec loop-502 ...)) in
                                                       ↓call-0((3, 2),
                                                                 ↓cancel-2(
                                                                 0,
                                                                 promise (
                                                                 cancel-2 callNo'-629 ↦
                                                                 let
                                                                    var-630 =
                                                                    (=)-0
                                                                    (
                                                                    1, 
                                                                    callNo'-629) in
                                                                 match var-630 with (
                                                                 true ↦ 
                                                                 promise (
                                                                 dummy-3 empty-663 ↦
                                                                 return-205
                                                                 ⟨empty-663⟩)
                                                                 as dummyPromise-631 in
                                                                 (rec loop-654 ...)
                                                                 ();
                                                                 awaitValue-207
                                                                 dummyPromise-631;
                                                                 let
                                                                    var-632 =
                                                                    (rec awaitCancel-642 ...)
                                                                    1 in
                                                                 var-632
                                                                 (rec loop-633 ...) | 
                                                                 false ↦ 
                                                                 (rec var-664 ...)
                                                                 ()))
                                                                 as var-628 in
                                                                 promise (
                                                                 call-0 (
                                                                 x-573, 
                                                                 callNo-572) ↦
                                                                 let
                                                                    var-578 =
                                                                    awaitCancel-225
                                                                    callNo-572 in
                                                                 var-578
                                                                 (rec loop-701 ...);
                                                                 let y-574 =
                                                                    (fun x-575 ↦ 
                                                                    let
                                                                    
                                                                    var-576 =
                                                                    let
                                                                    
                                                                    var-577 =
                                                                    (*)-8
                                                                    (
                                                                    6, x-575) in
                                                                    (*)-8
                                                                    (
                                                                    5, 
                                                                    var-577) in
                                                                    (*)-8
                                                                    (
                                                                    4, 
                                                                    var-576))
                                                                    x-573 in
                                                                 ↑result-1(
                                                                 (y-574, 
                                                                  callNo-572),
                                                                 return ());
                                                                 (rec loop-701 ...)
                                                                 ())
                                                                 as p-571 in
                                                                 return p-571)))))
Conf
  id = 1;
  res = promise (call-0 (x-1311, callNo-1310) ↦
                                let var-1312 = (!)-13 { contents = [] } in
                                (:=)-14
                                ({ contents = [] }, 
                                 (x-1311, callNo-1310)::var-1312);
                                (rec reInvokerCall-1680 ...) ())
                       as var-1309 in
                       promise (result-1 (y-1810, callNo-1809) ↦
                                let var-1811 =
                                   let var-1812 =
                                      filter-106
                                      (fun (_, callNo'-1814) ↦ (<>)-5
                                                                 (callNo-1809, 
                                                                  callNo'-1814)) in
                                   let var-1813 = (!)-13 { contents = [] } in
                                   var-1812 var-1813 in
                                (:=)-14 ({ contents = [] }, var-1811);
                                (rec reInvokerResult-1853 ...) ())
                       as var-1808 in
                       promise (cancel-2 callNo-1025 ↦
                                let var-1028 =
                                   let var-1029 =
                                      filter-106
                                      (fun (_, callNo'-1031) ↦ (<>)-5
                                                                 (callNo-1025, 
                                                                  callNo'-1031)) in
                                   let var-1030 = (!)-13 { contents = [] } in
                                   var-1029 var-1030 in
                                (:=)-14 ({ contents = [] }, var-1028);
                                let var-1026 =
                                   let var-1027 = (!)-13 { contents = [] } in
                                   reverse-33 var-1027 in
                                (rec reInvokerWrapper-1675 ...) var-1026;
                                (rec reInvokerCancel-1660 ...) ())
                       as var-1024 in
                       return ⟨()⟩
Conf
  id = 2;
  res = 360
