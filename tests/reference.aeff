operation foo : int ref

let (compare : 'c -> int -> ('c * int)) a b =
                let reference = ref 37 in
                send foo reference;
                (a, b+1)

run compare "6" 3

run promise (foo ir |-> <<ir>> ) as p in (awaitValue p,18)